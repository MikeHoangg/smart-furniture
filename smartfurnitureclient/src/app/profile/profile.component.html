<div class="profile-content" *ngIf="!error && data">
  <mat-card class="profile-card">
    <mat-card-header>
      <div mat-card-avatar *ngIf="data.image" class="avatar" [style.backgroundImage]="'url('+ data.image +')'"></div>
      <div mat-card-avatar *ngIf="!data.image"
           class="avatar" [style.backgroundImage]="'url(\'../../assets/img/profile/default-user.png\')'"></div>
      <mat-card-title>{{ data.username }}</mat-card-title>
      <mat-card-subtitle>{{ data.email }}</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <mat-list>
        <div *ngIf="data.first_name">
          <mat-divider></mat-divider>
          <mat-list-item>first name: {{ data.first_name }}</mat-list-item>
        </div>
        <div *ngIf="data.last_name">
          <mat-divider></mat-divider>
          <mat-list-item>last name: {{ data.last_name }}</mat-list-item>
        </div>
        <div *ngIf="data.height">
          <mat-divider></mat-divider>
          <mat-list-item>height: {{ data.height }}</mat-list-item>
          <mat-divider></mat-divider>
        </div>
      </mat-list>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button *ngIf="isOwner()" (click)="openDialog('editProfile')">
        <mat-icon svgIcon="edit"></mat-icon>
        Edit profile
      </button>
    </mat-card-actions>
  </mat-card>
  <mat-accordion class="tables-content">
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Furniture
        </mat-panel-title>
        <mat-panel-description>
          All {{ data.username }}'s furniture
        </mat-panel-description>
      </mat-expansion-panel-header>
      <button mat-button (click)="openDialog('addFurniture')" *ngIf="isOwner()">
        <mat-icon svgIcon="add"></mat-icon>
        Add furniture
      </button>

      <div *ngIf="ownedFurnitureDataSource.filteredData.length">
        <mat-form-field>
          <input matInput (keyup)="applyFurnitureFilter($event.target.value)" placeholder="Filter furniture">
        </mat-form-field>

        <div class="mat-elevation-z8">
          <table mat-table [dataSource]="ownedFurnitureDataSource" matSort>

            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> ID</th>
              <td mat-cell *matCellDef="let furniture"> {{ furniture.id }} </td>
            </ng-container>

            <ng-container matColumnDef="code">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Code</th>
              <td mat-cell *matCellDef="let furniture"> {{ furniture.code }} </td>
            </ng-container>

            <ng-container matColumnDef="manufacturer">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Manufacturer</th>
              <td mat-cell *matCellDef="let furniture"> {{ furniture.manufacturer }} </td>
            </ng-container>

            <ng-container matColumnDef="type">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Type</th>
              <td mat-cell *matCellDef="let furniture"> {{ furniture.type }} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="furnitureDisplayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: furnitureDisplayedColumns;">
            </tr>
          </table>

          <mat-paginator [pageSize]="5"></mat-paginator>
        </div>
      </div>
    </mat-expansion-panel>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Options
        </mat-panel-title>
        <mat-panel-description>
          All {{ data.username }}'s options
        </mat-panel-description>
      </mat-expansion-panel-header>
      <button mat-button (click)="openDialog('addOptions')" *ngIf="isOwner() && data.height">
        <mat-icon svgIcon="add"></mat-icon>
        Add options
      </button>
      <span *ngIf="isOwner() && !data.heigth">
        You need to add your height before you can create options
      </span>
      <div *ngIf="optionsDataSource.filteredData.length">
        <mat-form-field>
          <input matInput (keyup)="applyOptionsFilter($event.target.value)" placeholder="Filter options">
        </mat-form-field>

        <div class="mat-elevation-z8">
          <table mat-table [dataSource]="optionsDataSource" matSort>

            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> ID</th>
              <td mat-cell *matCellDef="let options"> {{ options.id }} </td>
            </ng-container>

            <ng-container matColumnDef="type">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Type</th>
              <td mat-cell *matCellDef="let options"> {{ options.type }} </td>
            </ng-container>

            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Name</th>
              <td mat-cell *matCellDef="let options"> {{ options.name }} </td>
            </ng-container>

            <ng-container matColumnDef="height">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Height</th>
              <td mat-cell *matCellDef="let options"> {{ options.height }} </td>
            </ng-container>

            <ng-container matColumnDef="length">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Length</th>
              <td mat-cell *matCellDef="let options"> {{ options.length }} </td>
            </ng-container>

            <ng-container matColumnDef="width">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Width</th>
              <td mat-cell *matCellDef="let options"> {{ options.width }} </td>
            </ng-container>

            <ng-container matColumnDef="incline">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Incline</th>
              <td mat-cell *matCellDef="let options"> {{ options.incline }} </td>
            </ng-container>

            <ng-container matColumnDef="rigidity">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Rigidity</th>
              <td mat-cell *matCellDef="let options"> {{ options.rigidity }} </td>
            </ng-container>
            <ng-container matColumnDef="temperature">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Temperature</th>
              <td mat-cell *matCellDef="let options"> {{ options.temperature }} </td>
            </ng-container>
            <ng-container matColumnDef="massage">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Massage</th>
              <td mat-cell *matCellDef="let options"> {{ options.massage }} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="optionsDisplayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: optionsDisplayedColumns;">
            </tr>
          </table>

          <mat-paginator [pageSize]="5"></mat-paginator>
        </div>
      </div>
    </mat-expansion-panel>
  </mat-accordion>
</div>
<div *ngIf="error" class="profile-content">
  {{ error.detail }}
</div>
